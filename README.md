# BlockDisplayEditor
## 概要
ゲーム「Minecraft」における Block Display というエンティティのプロパティを視覚的にかつ簡単に編集できるようにしたものです。

## 開発背景と目的
Block Display には、クォータニオン( $Q=[x,y,z,w]$ )を設定することで任意の回転を表現することができますが、
特定の角度にするためには複雑な計算が必要であるためそのままでは使いやすいものではありませんでした。

また、Webサイト上で編集しMinecraftのコマンドにエクスポート可能なツールが既に存在しましたが、
それでは修正の度にMinecraftとWebサイトを行き来する必要があり円滑でないため、Minecraft上だけで完結するツールを作りたいと思い、開発に着手しました。

## 機能

ゲーム上のプレイヤーの視点操作によって、Block Display の座標・回転・スケールを任意に調節可能です。

## 工夫した点・こだわった点

## ぶつかった課題と解決策

### 課題1: 回転の中心がブロックの中心でない
Minecraft上でのクォータニオンによる回転では、Block Display はブロックの中心ではなく、原点を中心として回転してしまいます。
これでは、回転を編集可能にしたとしても扱いづらく実用的なものにはなりません。

#### 解決策
$Q=[0,0,0,1]$ の全く回転していない状態では、1辺の長さが1の立方体の中心は原点からx,y,z={0.5,0.5,0.5}だけ移動したあるべきです。
そのため、Block Display を表示する位置に対して $x,y,z=[-0.5,-0.5,-0.5]$ のオフセットを掛けることで回転の中心をブロックの中心にすることができます。
幸いなことに、Block Displayには translation という平行移動を表す3次元ベクトルを設定することができるため、
$x,y,z=[-0.5,-0.5,-0.5]$ をそのまま設定すればよさそうです。

ですが、このままでは2つ問題があります。

1つ目は、スケールを変化させたときに中心がずれてしまうことです。
これは、長さ1の立方体の場合にはx,y,z={-0.5,-0.5,-0.5}であったため、スケールの各値が $S_{x,y,z}$ であったときに、
translation を $[ -S_{x}/2, -S_{y}/2, -S_{z}/2 ]$ にすることで解決できます。

2つ目の問題は、回転を適用したときに中心がずれてしまうことです。

$Q=[0,0,0,1]$ の全く回転していない状態では、上記のままでも問題ないですが、回転自体はブロックの中心でなく原点を中心として行われるため、
回転と同時に translation も変化させる必要があります。

では、どのように変化させる必要があるのかというと、 $[ -S_{x}/2, -S_{y}/2, -S_{z}/2 ]$ という3次元ベクトルにクォータニオンを適用し、ベクトルを回転させればいいわけです。

これには、共役クォータニオン $` \bar{q} `$ という
